<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Useful tools for transforming the input features | What Patrick is thinking about</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Useful tools for transforming the input features" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Incredibly usefull tool to analyze and preprocess data for a deep neural network" />
<meta property="og:description" content="Incredibly usefull tool to analyze and preprocess data for a deep neural network" />
<link rel="canonical" href="https://patrick-hanley.github.io/thought_experiments/2021/02/21/_02_21_feature_engineering_numerical_transformation.html" />
<meta property="og:url" content="https://patrick-hanley.github.io/thought_experiments/2021/02/21/_02_21_feature_engineering_numerical_transformation.html" />
<meta property="og:site_name" content="What Patrick is thinking about" />
<meta property="og:image" content="https://patrick-hanley.github.io/thought_experiments/images/wine_dataset/iStock-615737086-768x512.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-21T00:00:00-06:00" />
<script type="application/ld+json">
{"url":"https://patrick-hanley.github.io/thought_experiments/2021/02/21/_02_21_feature_engineering_numerical_transformation.html","@type":"BlogPosting","headline":"Useful tools for transforming the input features","dateModified":"2021-02-21T00:00:00-06:00","datePublished":"2021-02-21T00:00:00-06:00","image":"https://patrick-hanley.github.io/thought_experiments/images/wine_dataset/iStock-615737086-768x512.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://patrick-hanley.github.io/thought_experiments/2021/02/21/_02_21_feature_engineering_numerical_transformation.html"},"description":"Incredibly usefull tool to analyze and preprocess data for a deep neural network","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/thought_experiments/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://patrick-hanley.github.io/thought_experiments/feed.xml" title="What Patrick is thinking about" /><link rel="shortcut icon" type="image/x-icon" href="/thought_experiments/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/thought_experiments/">What Patrick is thinking about</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/thought_experiments/about/">About Me</a><a class="page-link" href="/thought_experiments/search/">Search</a><a class="page-link" href="/thought_experiments/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Useful tools for transforming the input features</h1><p class="page-description">Incredibly usefull tool to analyze and preprocess data for a deep neural network</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-02-21T00:00:00-06:00" itemprop="datePublished">
        Feb 21, 2021
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      9 min read
    
</span></p>

    

    
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#"></a></li>
<li class="toc-entry toc-h1"><a href="#I-will-explore-the-transformations-using-the-wine-data-set-from-Kaggle.">I will explore the transformations using the wine data set from Kaggle. </a></li>
<li class="toc-entry toc-h1"><a href="#The-following-numerical-transformations-will-be-evaluated-on-the-dataset:">The following numerical transformations will be evaluated on the dataset: </a></li>
<li class="toc-entry toc-h1"><a href="#Lets-take-a-quick-look-at-our-data.">Lets take a quick look at our data. </a></li>
<li class="toc-entry toc-h1"><a href="#-1"></a></li>
<li class="toc-entry toc-h1"><a href="#stratified-cross-validation">stratified cross validation </a></li>
<li class="toc-entry toc-h1"><a href="#Baseline-score:">Baseline score: </a></li>
<li class="toc-entry toc-h1"><a href="#Using-the-clipped-data-set-to-median-(also-includes-columns-indicating-clippage)">Using the clipped data set to median (also includes columns indicating clippage) </a></li>
<li class="toc-entry toc-h1"><a href="#Added-transform-of-the-clipped-feature.--Hmm,-degraded-slightly.">Added transform of the clipped feature.  Hmm, degraded slightly. </a></li>
<li class="toc-entry toc-h1"><a href="#Adding-all-'alcohol'-transforms-to-the-feature-set">Adding all &#39;alcohol&#39; transforms to the feature set </a></li>
<li class="toc-entry toc-h1"><a href="#XGB-to-the-rescue">XGB to the rescue </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021_02_21_feature_engineering_numerical_transformation.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://colab.research.google.com/github/patrick-hanley/thought_experiments/blob/master/_notebooks/2021_02_21_feature_engineering_numerical_transformation.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>
<a class="anchor" href="#" aria-hidden="true"><span class="octicon octicon-link"></span></a><img src="https://patrick-hanley.github.io/thought_experiments/images/wine_dataset/iStock-615737086-768x512.jpg" alt="">
</h1>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Standard Library Imports</span>

<span class="o">%</span><span class="k">reload_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="o">!</span>pip install fastai --upgrade --q
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">pandas.api.types</span> <span class="kn">import</span> <span class="n">is_string_dtype</span><span class="p">,</span> <span class="n">is_numeric_dtype</span><span class="p">,</span> <span class="n">is_categorical_dtype</span>
<span class="kn">from</span> <span class="nn">fastai.tabular.all</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">PowerTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">QuantileTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">PowerTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">QuantileTransformer</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">kurtosis</span><span class="p">,</span> <span class="n">skew</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">"error"</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">drive</span>
<span class="n">mnt</span><span class="o">=</span><span class="n">drive</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">'/content/gdrive'</span><span class="p">,</span> <span class="n">force_remount</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

    </details>
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 194kB 6.0MB/s 
     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 61kB 7.3MB/s 
Mounted at /content/gdrive
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="I-will-explore-the-transformations-using-the-wine-data-set-from-Kaggle.">
<a class="anchor" href="#I-will-explore-the-transformations-using-the-wine-data-set-from-Kaggle." aria-hidden="true"><span class="octicon octicon-link"></span></a>I will explore the transformations using the <a href="https://www.kaggle.com/uciml/red-wine-quality-cortez-et-al-2009">wine data set</a> from Kaggle.<a class="anchor-link" href="#I-will-explore-the-transformations-using-the-wine-data-set-from-Kaggle."> </a>
</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="The-following-numerical-transformations-will-be-evaluated-on-the-dataset:">
<a class="anchor" href="#The-following-numerical-transformations-will-be-evaluated-on-the-dataset:" aria-hidden="true"><span class="octicon octicon-link"></span></a>The following numerical transformations will be evaluated on the dataset:<a class="anchor-link" href="#The-following-numerical-transformations-will-be-evaluated-on-the-dataset:"> </a>
</h1>
<ul>
<li>Log </li>
<li>Square Root</li>
<li>Box-Cox</li>
<li>Yeo-Yohnson</li>
<li>Quantile</li>
<li>Clipping</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># https://www.marsja.se/transform-skewed-data-using-square-root-log-box-cox-methods-in-python/</span>
<span class="k">def</span> <span class="nf">box_cox_transform</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">):</span>
  
  <span class="k">try</span><span class="p">:</span>
    <span class="n">X_trans_bc</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
  <span class="k">except</span><span class="p">:</span>
    <span class="c1"># datax = max(X_train+1) - X_train</span>
    <span class="c1"># datay = max(X_train+1) - X_train</span>
    <span class="n">datax</span><span class="p">,</span> <span class="n">datay</span> <span class="o">=</span> <span class="n">reverse_distribution</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">)</span>
    <span class="n">X_trans_bc</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">datax</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">datay</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">X_trans_bc</span>

<span class="k">def</span> <span class="nf">log_transform</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">X_trans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="k">except</span><span class="p">:</span>
    <span class="n">datax</span><span class="p">,</span> <span class="n">datay</span> <span class="o">=</span> <span class="n">reverse_distribution</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">X_trans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">datax</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">X_trans</span>

<span class="k">def</span> <span class="nf">sqrt_transform</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">reverse_distribution</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">):</span>
  <span class="c1"># data can not have negative values</span>
  <span class="n">datax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">X_train</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">X_train</span>
  <span class="n">datay</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">X_test</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">X_test</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">datax</span><span class="p">,</span> <span class="n">datay</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="n">trns_name</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
  <span class="n">s</span> <span class="o">=</span> <span class="n">skew</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
  <span class="n">s_str</span> <span class="o">=</span> <span class="s1">'</span><span class="si">%.2f</span><span class="s1">'</span><span class="o">%</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
  <span class="n">k</span> <span class="o">=</span> <span class="s1">'</span><span class="si">%.2f</span><span class="s1">'</span><span class="o">%</span><span class="p">(</span><span class="n">kurtosis</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
  <span class="n">k2</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">normaltest</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
  <span class="n">ks</span> <span class="o">=</span> <span class="s1">'</span><span class="si">%.2f</span><span class="s1">'</span><span class="o">%</span><span class="p">(</span><span class="n">k2</span><span class="p">)</span>
  <span class="c1"># pvalue = '%.2f'%(p)</span>
  <span class="n">title</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">trns_name</span><span class="p">,</span> <span class="n">s_str</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">ks</span><span class="p">])</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_transforms</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">feat</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
  <span class="c1">#rng = np.random.RandomState(304)</span>
  <span class="n">N_SAMPLES</span> <span class="o">=</span> <span class="mi">1000</span>
  <span class="n">FONT_SIZE</span> <span class="o">=</span> <span class="mi">10</span>
  <span class="n">BINS</span> <span class="o">=</span> <span class="mi">100</span>
  <span class="c1"># initialize models</span>
  <span class="n">bc</span> <span class="o">=</span> <span class="n">PowerTransformer</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">'box-cox'</span><span class="p">)</span>
  <span class="n">yj</span> <span class="o">=</span> <span class="n">PowerTransformer</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">'yeo-johnson'</span><span class="p">)</span>
  <span class="c1"># n_quantiles is set to the training set size rather than the default value</span>
  <span class="c1"># to avoid a warning being raised by this example</span>
  <span class="n">qt</span> <span class="o">=</span> <span class="n">QuantileTransformer</span><span class="p">(</span><span class="n">n_quantiles</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">output_distribution</span><span class="o">=</span><span class="s1">'normal'</span><span class="p">,</span>
                          <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">X</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="n">feat</span><span class="p">]</span>
  <span class="nb">print</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">feat</span><span class="p">],</span> <span class="n">X</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span>
  

  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>


    <span class="c1"># perform power transforms and quantile transform</span>
    <span class="n">X_trans_bc</span> <span class="o">=</span> <span class="n">box_cox_transform</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span> <span class="c1"># bc.fit(X_train).transform(X_test)</span>

    <span class="n">X_trans_yj</span> <span class="o">=</span> <span class="n">yj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="n">X_trans_qt</span> <span class="o">=</span> <span class="n">qt</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="n">X_trans_sqrt</span> <span class="o">=</span> <span class="n">sqrt_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="n">X_trans_log</span> <span class="o">=</span> <span class="n">log_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="n">transforms</span> <span class="o">=</span> <span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">X_trans_bc</span><span class="p">,</span> <span class="n">X_trans_yj</span><span class="p">,</span> <span class="n">X_trans_qt</span><span class="p">,</span> <span class="n">X_trans_sqrt</span><span class="p">,</span>
                  <span class="n">X_trans_log</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'train'</span><span class="p">,</span> <span class="s1">'trans_bc'</span><span class="p">,</span> <span class="s1">'trans_yj'</span><span class="p">,</span> <span class="s1">'trans_qt'</span><span class="p">,</span> 
              <span class="s1">'trans_sqrt'</span><span class="p">,</span> <span class="s1">'trans_log'</span><span class="p">]</span>

  <span class="k">else</span><span class="p">:</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">transforms</span> <span class="o">=</span> <span class="p">[</span><span class="n">X</span><span class="p">]</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'X_train'</span><span class="p">]</span>


  <span class="c1">#Set up fix and axes for plotting</span>
  <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figaspect</span><span class="p">(</span><span class="o">.</span><span class="mi">2</span><span class="p">),</span> 
                           <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

  <span class="c1"># trackers for skew and kurtosis</span>
  <span class="n">s_best</span> <span class="o">=</span> <span class="mf">9999.</span>
  <span class="n">k_best</span><span class="o">=</span> <span class="mf">9999.</span>
  <span class="n">title_best</span><span class="o">=</span><span class="p">[]</span>
  <span class="n">best_model</span><span class="o">=</span><span class="s1">''</span>
  <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">trns_name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">transforms</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">titles</span><span class="p">):</span>
    
    <span class="c1"># histogram each model</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">BINS</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="n">log</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">t</span><span class="p">)))</span>
    
    <span class="c1"># analyze distribution</span>
    <span class="n">s</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="n">get_stats</span><span class="p">(</span><span class="n">trns_name</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>


    <span class="c1"># find best skew, then best kurtosis</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">s_best</span><span class="p">:</span>
      <span class="n">title_best</span> <span class="o">=</span> <span class="n">title</span>
      <span class="n">t_best</span> <span class="o">=</span> <span class="n">t</span>
      <span class="n">s_best</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
      <span class="n">best_model</span> <span class="o">=</span> <span class="n">trns_name</span>
    <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="n">s_best</span><span class="p">:</span>
      <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">k2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">k_best</span><span class="p">:</span>
        <span class="n">title_best</span> <span class="o">=</span> <span class="n">title</span>
        <span class="n">k_best</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">k2</span><span class="p">)</span>
        <span class="n">t_best</span><span class="o">=</span><span class="n">t</span>
        <span class="n">best_model</span> <span class="o">=</span> <span class="n">trns_name</span>
    
    <span class="n">title</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">feat</span><span class="p">],</span> <span class="n">title</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">FONT_SIZE</span><span class="p">)</span>

  <span class="n">col</span> <span class="o">=</span> <span class="s1">'_'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">feat</span><span class="p">],</span> <span class="n">best_model</span><span class="p">])</span> 
  
  <span class="n">transfored_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">t_best</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>

  <span class="nb">print</span> <span class="p">(</span><span class="s2">"Best:</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">best_model</span><span class="p">))</span>
  <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

  <span class="c1"># return transformed array from the best model</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">transfored_df</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">remove_outliers</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
  <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
  <span class="n">standard_deviation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
  <span class="n">distance_from_mean</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">X</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span>
  <span class="n">max_deviations</span> <span class="o">=</span> <span class="mf">1.5</span>
  <span class="n">not_outlier</span> <span class="o">=</span> <span class="n">distance_from_mean</span> <span class="o">&lt;</span> <span class="n">max_deviations</span> <span class="o">*</span> <span class="n">standard_deviation</span>
  <span class="n">no_outliers</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">not_outlier</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">no_outliers</span>



<span class="k">def</span> <span class="nf">clip_feature</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">max_deviations</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">'std'</span><span class="p">):</span>
  <span class="sd">"""provide dataFrame and get a clipped daataframe back including 2 additional</span>
<span class="sd">  columns indicating the index of clippage.</span>
<span class="sd">  """</span>

  <span class="n">clipped_dfs</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>

    <span class="n">mean</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">standard_deviation</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

    <span class="n">upper</span> <span class="o">=</span> <span class="n">mean</span> <span class="o">+</span> <span class="p">(</span><span class="n">max_deviations</span> <span class="o">*</span> <span class="n">standard_deviation</span><span class="p">)</span>
    <span class="n">lower</span> <span class="o">=</span> <span class="n">mean</span> <span class="o">-</span> <span class="p">(</span><span class="n">max_deviations</span> <span class="o">*</span> <span class="n">standard_deviation</span><span class="p">)</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">'std'</span><span class="p">:</span>
      <span class="n">lower_value</span> <span class="o">=</span> <span class="n">lower</span>
      <span class="n">upper_value</span> <span class="o">=</span> <span class="n">upper</span>
      <span class="n">V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">lower_value</span><span class="p">,</span> <span class="n">upper_value</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">'mean'</span><span class="p">:</span>
      <span class="n">lower_value</span> <span class="o">=</span> <span class="n">mean</span>
      <span class="n">upper_value</span> <span class="o">=</span> <span class="n">mean</span>
      <span class="n">V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">val</span><span class="o">&lt;</span><span class="n">lower</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">val</span><span class="o">&gt;</span><span class="n">upper</span><span class="p">),</span> <span class="n">mean</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
      
    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">'median'</span><span class="p">:</span>
      <span class="n">median</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
      <span class="n">lower_value</span> <span class="o">=</span> <span class="n">median</span>
      <span class="n">upper_value</span> <span class="o">=</span> <span class="n">median</span>
      <span class="n">V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">val</span><span class="o">&lt;</span><span class="n">lower</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="n">val</span><span class="o">&gt;</span><span class="n">upper</span><span class="p">),</span> <span class="n">median</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

    <span class="c1">#V = np.clip(val, lower_value, upper_value, out=None)</span>
    <span class="n">clip_low</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">val</span><span class="o">&lt;</span><span class="n">lower</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">clip_high</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">val</span><span class="o">&gt;</span><span class="n">upper</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="c1">#confirm the series was clipped</span>
    <span class="n">len_low</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">clip_low</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">len_high</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">clip_high</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">len_low</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span> <span class="ow">or</span> <span class="p">(</span><span class="n">len_high</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
      <span class="n">clipped_name</span> <span class="o">=</span> <span class="s1">'_'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">'clip'</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_deviations</span><span class="p">),</span> <span class="n">feature</span><span class="p">])</span>
      <span class="n">is_clipped_low</span> <span class="o">=</span> <span class="s1">'_'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">'IS_CLIP_LOW'</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_deviations</span><span class="p">),</span> <span class="n">feature</span><span class="p">])</span>
      <span class="n">is_clipped_high</span> <span class="o">=</span> <span class="s1">'_'</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">'IS_CLIP_HIGH'</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_deviations</span><span class="p">),</span> <span class="n">feature</span><span class="p">])</span>
      <span class="n">dv</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">clipped_name</span><span class="p">:</span><span class="n">V</span><span class="p">,</span> <span class="n">is_clipped_low</span><span class="p">:</span><span class="n">clip_low</span><span class="p">,</span> <span class="n">is_clipped_high</span><span class="p">:</span><span class="n">clip_high</span><span class="p">}</span> <span class="p">)</span>
    
      <span class="n">clipped_dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dv</span><span class="p">)</span>
  <span class="n">clipped_dfs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">clipped_dfs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">clipped_dfs</span>



<span class="c1"># I came across this funtion on Kaggle(I think) and found it incredibly helpful</span>
<span class="c1"># https://gist.github.com/harperfu6/5ea565ee23aaf8461a840c480490cd9a</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">"display.max_rows"</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">resumetable</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Dataset Shape: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'dtypes'</span><span class="p">])</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">'Name'</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[</span><span class="s1">'index'</span><span class="p">]</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[[</span><span class="s1">'Name'</span><span class="p">,</span> <span class="s1">'dtypes'</span><span class="p">]]</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">'Missing'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">'Uniques'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">'First Value'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">'Second Value'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">'Third Value'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">summary</span><span class="p">[</span><span class="s1">'Name'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">summary</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">summary</span><span class="p">[</span><span class="s1">'Name'</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">,</span> <span class="s1">'Entropy'</span><span class="p">]</span> <span class="o">=</span> \
        <span class="nb">round</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">entropy</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">summary</span>

<span class="k">def</span> <span class="nf">random_seed</span><span class="p">(</span><span class="n">seed_value</span><span class="p">,</span> <span class="n">use_cuda</span><span class="p">):</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed_value</span><span class="p">)</span> <span class="c1"># cpu vars</span>
    <span class="n">torch</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="n">seed_value</span><span class="p">)</span> <span class="c1"># cpu  vars</span>
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">seed_value</span><span class="p">)</span> <span class="c1"># Python</span>
    <span class="k">if</span> <span class="n">use_cuda</span><span class="p">:</span> 
        <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">manual_seed</span><span class="p">(</span><span class="n">seed_value</span><span class="p">)</span>
        <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">manual_seed_all</span><span class="p">(</span><span class="n">seed_value</span><span class="p">)</span> <span class="c1"># gpu vars</span>
        <span class="n">torch</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">cudnn</span><span class="o">.</span><span class="n">deterministic</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1">#needed</span>
        <span class="n">torch</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">cudnn</span><span class="o">.</span><span class="n">benchmark</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>

    </div>
</div>
</div>

    </details>
</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Lets-take-a-quick-look-at-our-data.">
<a class="anchor" href="#Lets-take-a-quick-look-at-our-data." aria-hidden="true"><span class="octicon octicon-link"></span></a>Lets take a quick look at our data.<a class="anchor-link" href="#Lets-take-a-quick-look-at-our-data."> </a>
</h1>
<ul>
<li>11 features and 1 target</li>
<li>1600 rows of data</li>
</ul>
<p>For a more in depth analysis see the previous blog XXXX.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">resumetable</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

    </details>
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Dataset Shape: (1599, 12)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>dtypes</th>
      <th>Missing</th>
      <th>Uniques</th>
      <th>First Value</th>
      <th>Second Value</th>
      <th>Third Value</th>
      <th>Entropy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>fixed acidity</td>
      <td>float64</td>
      <td>0</td>
      <td>96</td>
      <td>7.4000</td>
      <td>7.8000</td>
      <td>7.800</td>
      <td>5.94</td>
    </tr>
    <tr>
      <th>1</th>
      <td>volatile acidity</td>
      <td>float64</td>
      <td>0</td>
      <td>143</td>
      <td>0.7000</td>
      <td>0.8800</td>
      <td>0.760</td>
      <td>6.39</td>
    </tr>
    <tr>
      <th>2</th>
      <td>citric acid</td>
      <td>float64</td>
      <td>0</td>
      <td>80</td>
      <td>0.0000</td>
      <td>0.0000</td>
      <td>0.040</td>
      <td>5.87</td>
    </tr>
    <tr>
      <th>3</th>
      <td>residual sugar</td>
      <td>float64</td>
      <td>0</td>
      <td>91</td>
      <td>1.9000</td>
      <td>2.6000</td>
      <td>2.300</td>
      <td>4.78</td>
    </tr>
    <tr>
      <th>4</th>
      <td>chlorides</td>
      <td>float64</td>
      <td>0</td>
      <td>153</td>
      <td>0.0760</td>
      <td>0.0980</td>
      <td>0.092</td>
      <td>6.22</td>
    </tr>
    <tr>
      <th>5</th>
      <td>free sulfur dioxide</td>
      <td>float64</td>
      <td>0</td>
      <td>60</td>
      <td>11.0000</td>
      <td>25.0000</td>
      <td>15.000</td>
      <td>5.08</td>
    </tr>
    <tr>
      <th>6</th>
      <td>total sulfur dioxide</td>
      <td>float64</td>
      <td>0</td>
      <td>144</td>
      <td>34.0000</td>
      <td>67.0000</td>
      <td>54.000</td>
      <td>6.60</td>
    </tr>
    <tr>
      <th>7</th>
      <td>density</td>
      <td>float64</td>
      <td>0</td>
      <td>436</td>
      <td>0.9978</td>
      <td>0.9968</td>
      <td>0.997</td>
      <td>7.96</td>
    </tr>
    <tr>
      <th>8</th>
      <td>pH</td>
      <td>float64</td>
      <td>0</td>
      <td>89</td>
      <td>3.5100</td>
      <td>3.2000</td>
      <td>3.260</td>
      <td>5.91</td>
    </tr>
    <tr>
      <th>9</th>
      <td>sulphates</td>
      <td>float64</td>
      <td>0</td>
      <td>96</td>
      <td>0.5600</td>
      <td>0.6800</td>
      <td>0.650</td>
      <td>5.73</td>
    </tr>
    <tr>
      <th>10</th>
      <td>alcohol</td>
      <td>float64</td>
      <td>0</td>
      <td>65</td>
      <td>9.4000</td>
      <td>9.8000</td>
      <td>9.800</td>
      <td>5.19</td>
    </tr>
    <tr>
      <th>11</th>
      <td>quality</td>
      <td>int64</td>
      <td>0</td>
      <td>6</td>
      <td>5.0000</td>
      <td>5.0000</td>
      <td>5.000</td>
      <td>1.71</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I wanted a simple way to visualize the distributions of the feaatures and also quickly see how they could be transormed into a guasian distribution needed for neural networks.  I created a library that runs the Transforms listed above on each feature and automatically selects the optimal transform based on the skew and kurtosis.</p>
<p>Let's see an example.  The plots below are only evaluating 1 feature ('alcohol'), however, in practice, we would do this for the entire dataset.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>
<a class="anchor" href="#-1" aria-hidden="true"><span class="octicon octicon-link"></span></a><img src="https://patrick-hanley.github.io/thought_experiments/images/wine_dataset/skew_alcohol.png" alt="'did this work2?'">
</h1>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the plot above, we visually see that the most gausian distribution came from the Quantile Transformation.  This is also the Transformation that was automatically selected based on skew and kertosis as the most optimum.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Same data as above, but on a log scale</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lets now clip the data to a limit of 2 standard deviations and then run it through the transforms.</p>
<p>The Clip transformation does a few things.</p>
<ol>
<li>Clips values to be within X number of standard deviations.</li>
<li>The values outside the range, will be adjusted to 1 of the 3 options:<blockquote>
<ul>
<li>X standard deviations</li>
<li>mean</li>
<li>median</li>
</ul>
</blockquote>
</li>
<li>Additional columns will be added to indicate if a value was clipped low or high.</li>
</ol>
<p>Let's see a sample output.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">clipped_2_df</span> <span class="o">=</span> <span class="n">clip_feature</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'std'</span><span class="p">)</span>

<span class="c1"># We can see that the column names have changed</span>
<span class="c1"># and also include weather it was clipped or not.</span>
<span class="n">resumetable</span><span class="p">(</span><span class="n">clipped_2_df</span><span class="p">)[</span><span class="mi">30</span><span class="p">:</span><span class="mi">33</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Dataset Shape: (1599, 36)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>dtypes</th>
      <th>Missing</th>
      <th>Uniques</th>
      <th>First Value</th>
      <th>Second Value</th>
      <th>Third Value</th>
      <th>Entropy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30</th>
      <td>clip_std_2_alcohol</td>
      <td>float64</td>
      <td>0</td>
      <td>52</td>
      <td>9.4</td>
      <td>9.8</td>
      <td>9.8</td>
      <td>5.05</td>
    </tr>
    <tr>
      <th>31</th>
      <td>IS_CLIP_LOW_std_2_alcohol</td>
      <td>bool</td>
      <td>0</td>
      <td>1</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>32</th>
      <td>IS_CLIP_HIGH_std_2_alcohol</td>
      <td>bool</td>
      <td>0</td>
      <td>2</td>
      <td>False</td>
      <td>False</td>
      <td>False</td>
      <td>0.26</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We get a new dataframe that consists of the clipped values and a IS_CLIP_LOW and IS_CLIP_HIGH column.</p>
<p>note-Looks like 'alcohol' was only clipped on the High side based on the number of unique variables.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, lets run our clipped features through the Transforms.  We can see the bin around 13 increased significantly (aatches 2 standard deviations). Also, transforming the clipped version degraded the Quantile normalization.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description" open="">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">clip_std_2_df</span> <span class="o">=</span> <span class="n">plot_transforms</span><span class="p">(</span><span class="n">clipped_2_df</span><span class="p">,</span> <span class="n">clipped_2_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">'clip_std_2_alcohol'</span><span class="p">),</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

    </details>
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>clip_std_2_alcohol 52
Best:trans_bc
</pre>
</div>
</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lets repeat the exercise, but move the outliers to the median.  The results are similar with a slite improvement of kurtosis.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description" open="">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">clipped_2_median_df</span> <span class="o">=</span> <span class="n">clip_feature</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'median'</span><span class="p">)</span>
<span class="n">clipped_2_median_trans_df</span><span class="o">=</span> <span class="n">plot_transforms</span><span class="p">(</span><span class="n">clipped_2_median_df</span><span class="p">,</span> <span class="n">clipped_2_median_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">'clip_median_2_alcohol'</span><span class="p">),</span> <span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

    </details>
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>clip_median_2_alcohol 51
Best:trans_bc
</pre>
</div>
</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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%0A">
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now for the real test, lets see how a neural network is effected by these modifications.</p>
<ol>
<li>We will try a baseline with the default feaature set.</li>
<li>Replace the 'alcohol' feature with the QuantileTransformer version of the same feature.</li>
<li>Replace the 'alcohol' feature with Box-Cox, clipped to 2 standard deviations and set to the median.</li>
<li>Use all 3 'alcohol' columns</li>
</ol>
<p>Note-for now, all other features will be kept as default.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="stratified-cross-validation">
<a class="anchor" href="#stratified-cross-validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>stratified cross validation<a class="anchor-link" href="#stratified-cross-validation"> </a>
</h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">median_df</span> <span class="o">=</span><span class="n">clipped_2_median_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">clipped_2_median_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">'alcohol'</span><span class="p">)]</span>
<span class="n">median_df</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
                          
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>clip_median_2_alcohol</th>
      <th>IS_CLIP_LOW_median_2_alcohol</th>
      <th>IS_CLIP_HIGH_median_2_alcohol</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9.4</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.8</td>
      <td>False</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Baseline-score:">
<a class="anchor" href="#Baseline-score:" aria-hidden="true"><span class="octicon octicon-link"></span></a>Baseline score:<a class="anchor-link" href="#Baseline-score:"> </a>
</h1>
<ul>
<li>Fold 1: 0.9119496941566467</li>
<li>Fold 2: 0.8553459048271179</li>
<li>Fold 3: 0.893081784248352</li>
<li>Fold 4: 0.8805031180381775</li>
<li>Fold 5: 0.9119496941566467</li>
<li>Average Accuracy: 0.9056603908538818</li>
</ul>
<p>Fold 1: 0.9056603908538818
Fold 2: 0.8805031180381775
Fold 3: 0.849056601524353
Fold 4: 0.9056603908538818
Fold 5: 0.9119496941566467
Average Accuracy: 0.9056603908538818</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Score with Alcohol transformed using Quantile Transform degraded.</p>
<ul>
<li>Fold 1: 0.9056603908538818</li>
<li>Fold 2: 0.8805031180381775</li>
<li>Fold 3: 0.8553459048271179</li>
<li>Fold 4: 0.8867924809455872</li>
<li>Fold 5: 0.9056603908538818</li>
<li>Average Accuracy: 0.8867924809455872</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Using-the-clipped-data-set-to-median-(also-includes-columns-indicating-clippage)">
<a class="anchor" href="#Using-the-clipped-data-set-to-median-(also-includes-columns-indicating-clippage)" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the clipped data set to median (also includes columns indicating clippage)<a class="anchor-link" href="#Using-the-clipped-data-set-to-median-(also-includes-columns-indicating-clippage)"> </a>
</h1>
<p>Best score so far</p>
<ul>
<li>Fold 1: 0.9056603908538818</li>
<li>Fold 2: 0.9119496941566467</li>
<li>Fold 3: 0.8553459048271179</li>
<li>Fold 4: 0.893081784248352</li>
<li>Fold 5: 0.9056603908538818</li>
<li>Average Accuracy: 0.9119496941566467</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Added-transform-of-the-clipped-feature.--Hmm,-degraded-slightly.">
<a class="anchor" href="#Added-transform-of-the-clipped-feature.--Hmm,-degraded-slightly." aria-hidden="true"><span class="octicon octicon-link"></span></a>Added transform of the clipped feature.  Hmm, degraded slightly.<a class="anchor-link" href="#Added-transform-of-the-clipped-feature.--Hmm,-degraded-slightly."> </a>
</h1>
<ul>
<li>Fold 1: 0.8867924809455872</li>
<li>Fold 2: 0.893081784248352</li>
<li>Fold 3: 0.8553459048271179</li>
<li>Fold 4: 0.8742138147354126</li>
<li>Fold 5: 0.893081784248352</li>
<li>Average Accuracy: 0.8993710875511169</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Adding-all-'alcohol'-transforms-to-the-feature-set">
<a class="anchor" href="#Adding-all-'alcohol'-transforms-to-the-feature-set" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding all 'alcohol' transforms to the feature set<a class="anchor-link" href="#Adding-all-'alcohol'-transforms-to-the-feature-set"> </a>
</h1>
<ul>
<li>Fold 1: 0.9119496941566467</li>
<li>Fold 2: 0.893081784248352</li>
<li>Fold 3: 0.9056603908538818</li>
<li>Fold 4: 0.8679245114326477</li>
<li>Fold 5: 0.893081784248352</li>
<li>Average Accuracy: 0.9056603908538818</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I didn't see the improvement I was expecting.  Let's analyze the data by looking at the feature importance.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="XGB-to-the-rescue">
<a class="anchor" href="#XGB-to-the-rescue" aria-hidden="true"><span class="octicon octicon-link"></span></a>XGB to the rescue<a class="anchor-link" href="#XGB-to-the-rescue"> </a>
</h1>
<p>Interestingly, the XGB model had a score of 92.5%.  The best score I've seen on Kaggle was around ~91%.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description" open="">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">xgboost</span> <span class="kn">import</span> <span class="n">XGBClassifier</span>

<span class="n">y_test</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">quality</span>
<span class="n">df2</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df2</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">'quality'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">X_train_combined</span><span class="p">,</span> <span class="n">X_test_combined</span><span class="p">,</span> <span class="n">y_train_combined</span><span class="p">,</span> <span class="n">y_test_combined</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=.</span><span class="mi">2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">learning_rate</span><span class="o">=.</span><span class="mi">008</span><span class="p">)</span><span class="c1">#(max_depth=200, random_state=seed, oob_score=True, min_samples_split=30)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_combined</span><span class="p">,</span> <span class="n">y_train_combined</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">clf</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test_combined</span><span class="p">,</span> <span class="n">y_test_combined</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

    </details>
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>0.925
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description" open="">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">feat_importance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
  <span class="c1"># get list of feature importance for given model</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'cols'</span><span class="p">:</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="s1">'imp'</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">}</span>
                      <span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">'imp'</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

    </details>
</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The most important feature with the Quantile transform of 'alcohol'. Which shows we are on the right track.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the next Blog, I will investigate the results after transforming the entire feature set.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description" open="">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p></p>
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fi</span><span class="o">=</span><span class="n">feat_importance</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">X_train_combined</span><span class="p">)</span>
<span class="n">fi</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

    </details>
<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cols</th>
      <th>imp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>14</th>
      <td>alcohol_trans_qt</td>
      <td>0.413229</td>
    </tr>
    <tr>
      <th>2</th>
      <td>citric acid</td>
      <td>0.203427</td>
    </tr>
    <tr>
      <th>1</th>
      <td>volatile acidity</td>
      <td>0.200514</td>
    </tr>
    <tr>
      <th>9</th>
      <td>sulphates</td>
      <td>0.156309</td>
    </tr>
    <tr>
      <th>0</th>
      <td>fixed acidity</td>
      <td>0.026521</td>
    </tr>
    <tr>
      <th>3</th>
      <td>residual sugar</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>chlorides</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>free sulfur dioxide</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>6</th>
      <td>total sulfur dioxide</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>density</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="patrick-hanley/thought_experiments"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/thought_experiments/2021/02/21/_02_21_feature_engineering_numerical_transformation.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/thought_experiments/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/thought_experiments/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/thought_experiments/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>These are some things I&#39;m actively thinking about</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
